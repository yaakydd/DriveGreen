const knowledgeBase = [
  {
    keywords: ["hello", "hi", "hey"],
    response:
      "Hi! I‚Äôm Eco-Copilot üå± I can help you understand your vehicle‚Äôs carbon emissions and how to reduce them."
  },
  {
    keywords: ["what", "predict", "emissions"],
    response:
      "This tool estimates how much CO‚ÇÇ your vehicle produces based on fuel type, engine size, and cylinders."
  },
  {
    keywords: ["fuel", "best fuel"],
    response:
      "**Fuel matters a lot.**\n- Electric & hybrid ‚Üí lowest emissions\n- Gasoline ‚Üí moderate\n- Diesel ‚Üí higher CO‚ÇÇ but better efficiency\n\nCleaner fuel = greener driving üåç"
  },
  {
    keywords: ["engine", "engine size"],
    response:
      "Larger engines usually produce more emissions because they burn more fuel. Smaller engines are generally more eco-friendly."
  },
  {
    keywords: ["cylinders"],
    response:
      "More cylinders = more power, but also more fuel use and higher emissions. Fewer cylinders usually mean lower CO‚ÇÇ output."
  },
  {
    keywords: ["colors", "green", "yellow", "red"],
    response:
      "**Color guide:**\nüü¢ Green ‚Üí Low emissions\nüü° Yellow ‚Üí Moderate emissions\nüî¥ Red ‚Üí High emissions\n\nGreen is what we aim for!"
  },
  {
    keywords: ["accurate", "accuracy"],
    response:
      "Predictions are based on real emissions standards and patterns. Actual emissions can vary depending on driving habits and maintenance."
  },
  {
    keywords: ["reduce", "lower", "tips"],
    response:
      "**Ways to reduce emissions:**\n‚Ä¢ Drive smoothly\n‚Ä¢ Avoid unnecessary idling\n‚Ä¢ Keep tires properly inflated\n‚Ä¢ Reduce vehicle weight\n‚Ä¢ Consider a hybrid or EV"
  },
  {
    keywords: ["why", "important"],
    response:
      "Vehicle emissions contribute to climate change and air pollution. Reducing them helps protect health and the environment."
  },
  {
    keywords: ["thank"],
    response:
      "You‚Äôre welcome! Every greener choice makes a difference üåø"
  }
];



// Knowledge Base (Enhanced)
const knowledgeBase = [
  {
    keywords: ["hello", "hi", "hey"],
    response:
      "Greetings! I'm your Eco-Copilot. Ready to optimize your journey? ",
  },
  {
    keywords: ["app", "do", "help"],
    response:
      "I utilize advanced AI to analyze vehicle emissions. Enter your car's details, and I'll calculate your carbon footprint and suggest eco-friendly alternatives.",
  },
  {
    keywords: ["color", "red", "green"],
    response:
      "The colors indicate efficiency: **Green** is excellent, **Yellow** is average, and **Red** suggests high emissions needing attention.",
  },
  {
    keywords: ["reduce", "lower", "tips"],
    response:
      "**Optimization Protocols:**\n1. Maintain tire pressure.\n2. Remove excess weight.\n3. Avoid rapid acceleration.\n4. Consider hybrid/EV conversion.\n5. Use cruise control on highways.\n6. Plan routes to avoid traffic.",
  },
  {
    keywords: ["thank"],
    response: "You're welcome. Driving toward a sustainable future, together.",
  },
  // NEW ADDITIONS
  {
    keywords: ["calculate", "predict", "emissions", "carbon footprint"],
    response: "I predict emissions using your vehicle's make, model, year, fuel type, annual mileage, and driving habits. This data is compared to EPA and global emission standards to give you a personalized carbon score."
  },
  {
    keywords: ["impact", "health", "lives", "people"],
    response: "Vehicle emissions significantly impact public health and society. They release pollutants like PM2.5 and NOx, linked to asthma, heart disease, and reduced lung function. In cities, poor air quality from traffic can lower life expectancy and increase healthcare costs for communities."
  },
  {
    keywords: ["environment", "planet", "climate", "global warming"],
    response: "Transportation is a major contributor to climate change. CO2 from cars traps heat in the atmosphere, leading to rising temperatures, extreme weather, and ecosystem damage. Reducing your vehicle's emissions directly helps mitigate these global effects."
  },
  {
    keywords: ["electric", "ev", "hybrid", "better"],
    response: "Yes, generally. EVs produce zero tailpipe emissions. Even accounting for electricity generation, they often have a lower lifetime carbon footprint than gasoline cars. Hybrids also significantly reduce emissions by combining electric and fuel power."
  },
  {
    keywords: ["accurate", "trust", "data"],
    response: "My predictions are based on verified sources like the EPA Emission Factors, ICCT databases, and real-world testing models. I update algorithms regularly to ensure accuracy, but note that actual emissions can vary with maintenance and driving style."
  },
  {
    keywords: ["cost", "save", "money"],
    response: "Lower emissions often mean better fuel efficiency, saving you money on gas or electricity. Simple actions like proper maintenance can improve mileage by up to 10%. Switching to an efficient vehicle can lead to substantial long-term savings on fuel and taxes."
  },
  {
    keywords: ["government", "policy", "laws", "tax"],
    response: "Many governments use emission data to shape policies. High-emission vehicles may face higher taxes, congestion charges, or restrictions in low-emission zones. Your report can help you understand current incentives or penalties for your vehicle type."
  },
  {
    keywords: ["offset", "compensate", "tree"],
    response: "After reducing, you can offset unavoidable emissions by investing in verified projects like reforestation or renewable energy. However, offsetting is a supplement, not a substitute, for directly lowering your vehicle's emissions."
  },
  {
    keywords: ["future", "trend", "technology"],
    response: "The future is low-carbon. Advances in battery tech, hydrogen fuel cells, and sustainable biofuels are accelerating. Smart cities also promote public transit and cycling. Your awareness today prepares you for tomorrow's transportation ecosystem."
  },
  {
    keywords: ["share", "compare", "friends"],
    response: "Sharing your results can raise awareness! You can compare footprints with similar vehicles or averages in your region. Collective action drives greater change, encouraging communities to adopt greener habits."
  },
  {
    keywords: ["maintenance", "service", "engine"],
    response: "Regular maintenance is crucial for low emissions. A clean air filter, proper oil, timely tune-ups, and a functioning catalytic converter can reduce your car's pollutants by over 20%."
  },
  {
    keywords: ["fuel", "gasoline", "diesel", "biofuel"],
    response: "Fuel type matters. Diesel has higher PM emissions but often lower CO2 per mile. Biofuels can reduce net carbon impact. Electric and hydrogen fuels offer the cleanest pathways overall."
  },
  {
    keywords: ["why", "important", "matter"],
    response: "Because transportation accounts for nearly a quarter of global CO2 emissions. Every gallon of gasoline burned releases about 8.8 kg of CO2. Your choices directly affect air quality, climate stability, and public health‚Äîmaking a difference for current and future generations."
  }
];



const knowledgeBase = [
  // Existing Core
  {
    keywords: ["hello", "hi", "hey", "greetings"],
    response: "Greetings! I'm your Eco-Copilot. Ready to dive deep into your vehicle's environmental impact and explore solutions?",
  },
  {
    keywords: ["app", "do", "help", "purpose"],
    response: "I'm an AI-powered emissions analyzer. Provide your vehicle's make, model, year, mileage, and driving habits. I'll calculate your precise carbon footprint, compare it to benchmarks, and create a personalized roadmap to reduce it.",
  },
  {
    keywords: ["color", "red", "green", "yellow", "orange", "code"],
    response: "It's a traffic-light efficiency score: **üü¢ Green (0-80% of avg):** Excellent, best-in-class. **üü° Yellow (81-120%):** Average, room for improvement. **üü† Orange (121-150%):** Higher than average. **üî¥ Red (151%+):** High-priority action needed. Includes a breakdown of CO2, NOx, and PM emissions.",
  },
  {
    keywords: ["reduce", "lower", "tips", "improve", "lessen"],
    response: "**Actionable Optimization Plan:**\n1. **Tire Pressure:** Keep at manufacturer's max (saves 3% fuel).\n2. **Weight:** Remove roof racks/trunk clutter (100 lbs = ~1% mpg loss).\n3. **Driving:** Smooth acceleration & braking (can save 20%).\n4. **Route Planning:** Avoid traffic; use apps for 'green' routes.\n5. **Maintenance:** On-time oil/air filter changes.\n6. **Tech:** Consider a fuel-saving OBD-II device.\n7. **Alternatives:** One public transit/bike day per week.\n8. **Long-term:** EV/hybrid conversion or your next car.",
  },
  {
    keywords: ["thank", "thanks", "appreciate"],
    response: "You're genuinely welcome. Every question you ask is a step towards a cleaner planet. Let's keep going.",
  },

  // ******************************************************************
  // TECHNICAL & CALCULATION DETAILS (For the "How does this work?" user)
  // ******************************************************************
  {
    keywords: ["calculate", "predict", "formula", "algorithm", "math"],
    response: "**The Science Behind Your Score:** I use a multi-factor model: `Total CO2e = (Veh. Emission Factor √ó Annual Miles) + (Cold Start Penalty) + (Driving Aggressiveness Factor) + (AC/Heating Load)`. Data sources: EPA MOVES model, EU COPERT, real-world RDE (Real Driving Emissions) studies, and manufacturer-reported values. It's not just a simple lookup‚Äîit's a dynamic simulation.",
  },
  {
    keywords: ["accurate", "trust", "precise", "real", "exact"],
    response: "My core data comes from certified labs (EPA, WLTP) and peer-reviewed studies. The prediction has a **¬±8-12% margin of error** for standard driving. For maximum accuracy, you can input your actual fuel receipts over 3 months. No model is perfect, but this is industrial-grade.",
  },
  {
    keywords: ["data", "source", "where from", "database"],
    response: "Aggregated from: **1) Government:** EPA, EU Commission, ICCT. **2) Real-world testing:** Emissions Analytics (EQUA Index). **3) Academic:** MIT's Vehicle Forecast model. Updated quarterly to reflect fleet changes and new research.",
  },
  {
    keywords: ["model", "year", "make", "old car", "vintage"],
    response: "Yes! I have data back to **1975**. Older cars generally lack modern emission controls (like catalytic converters pre-1975), so their *per-mile* emissions can be **5-10x higher** for pollutants like CO and NOx, even if they drive fewer miles.",
  },
  {
    keywords: ["mileage", "km", "distance", "how much I drive"],
    response: "Annual mileage is the **single biggest factor**. The calculation is linear: double the miles, double the emissions. The average US driver covers **13,500 miles/year**. Input your exact number from odometer checks or insurance reports for a personalized result.",
  },
  {
    keywords: ["fuel", "gas", "diesel", "petrol", "cng", "lpg", "ethanol", "e85"],
    response: "**Fuel Carbon Intensity (gCO2e/MJ):** Gasoline: ~95, Diesel: ~95 (but more energy-dense), CNG: ~70, E85 (Corn): ~75 (but controversial due to land use), Electricity: Varies from **0 to 150** based on your local grid's renewable mix. Diesel has higher NOx & PM; CNG lower CO2.",
  },
  {
    keywords: ["electric", "ev", "tesla", "zero emission", "plug-in"],
    response: "EVs have **zero tailpipe emissions**. Their total 'Well-to-Wheels' footprint depends on your local power grid. In Norway (hydro-heavy), it's ~5 gCO2/km. In a coal-heavy grid, it can be ~130 gCO2/km‚Äîstill often better than gasoline (~180 gCO2/km). I factor in your ZIP code for a true comparison.",
  },
  {
    keywords: ["hybrid", "prius", "mild hybrid", "phev"],
    response: "Hybrids are a powerful middle-ground. A standard hybrid (like a Prius) can cut CO2 by **30-40%** in city driving. Plug-in Hybrids (PHEVs) are even better if charged regularly. Beware of 'mild hybrids'‚Äîthey only offer ~10% improvement.",
  },
  {
    keywords: ["hydrogen", "fuel cell", "fcev", "h2"],
    response: "Hydrogen fuel cell vehicles emit only water vapor. But the **'Well-to-Wheels'** story is key. 'Green' hydrogen from renewables is clean; 'Grey' hydrogen from natural gas can have a higher footprint than a diesel. The infrastructure is still limited.",
  },

  // ******************************************************************
  // HEALTH & SOCIETAL IMPACT (For the "Why should I care?" user)
  // ******************************************************************
  {
    keywords: ["health", "lungs", "asthma", "cancer", "sick"],
    response: "This is the human cost. Tailpipe emissions contain **PM2.5** (fine particles) that enter your bloodstream, **NOx** that forms smog, and **benzene** (carcinogen). The WHO links traffic pollution to **4.2 million premature deaths/year** globally. It causes childhood asthma, dementia risk, and low birth weight. Your car's emissions directly affect the health of people near roads‚Äîoften lower-income communities.",
  },
  {
    keywords: ["children", "kids", "school", "playground"],
    response: "Children are especially vulnerable. Their lungs are developing, and they breathe faster. Studies show higher rates of asthma and reduced lung function in kids living near high-traffic roads. Idling your car outside a school creates a concentrated pollution cloud. This is a direct, preventable impact.",
  },
  {
    keywords: ["noise", "sound", "quiet", "noise pollution"],
    response: "Internal combustion engines are a major source of **noise pollution**, linked to stress, hypertension, and sleep disturbance. EVs drastically reduce urban noise. Your vehicle choice affects the soundscape of your community.",
  },
  {
    keywords: ["city", "urban", "smog", "air quality", "pollution"],
    response: "Cities are **heat islands** where emissions get trapped. Vehicles are the #1 source of urban air pollution. Smog (ground-level ozone) damages crops and ecosystems. Cleaner vehicles mean visibly clearer skies and fewer 'bad air days' with health warnings.",
  },
  {
    keywords: ["equity", "poor", "rich", "fair", "justice", "inequality"],
    response: "**Environmental Justice** is central. Highways are often routed through marginalized communities. These populations suffer worse health outcomes while often driving less. Switching to an EV or reducing miles is a personal choice, but systemic change (clean public transit, zoning) is needed for true equity.",
  },
  {
    keywords: ["global warming", "climate change", "extreme weather", "flood", "fire"],
    response: "Every kilogram of CO2 from your tailpipe adds to the **global blanket** trapping heat. This leads to: stronger hurricanes, deeper droughts, catastrophic wildfires, and sea-level rise. Transportation is ~29% of US greenhouse gases. Your vehicle is a direct contributor to climate instability affecting millions globally.",
  },

  // ******************************************************************
  // MONEY, COST & ECONOMICS (For the "What's in it for me?" user)
  // ******************************************************************
  {
    keywords: ["cost", "save", "money", "expensive", "cheap", "fuel economy", "mpg"],
    response: "**Financial Breakdown:** A gas car costing $0.12/mile in fuel can cost an EV $0.04/mile in electricity. Annual savings: **$1,000+**. Maintenance: EVs have far fewer moving parts (no oil changes, fewer brakes), saving ~$800/year. Upfront cost is higher but **Total Cost of Ownership** often favors EVs after 5 years, especially with incentives.",
  },
  {
    keywords: ["tax", "incentive", "rebate", "credit", "subsidy"],
    response: "Governments offer substantial incentives to go green. In the US: **Federal EV tax credit up to $7,500**. Many states add $2,000-$5,000. Some countries offer **scrappage schemes** for old cars. High-emission vehicles may face **congestion charges** (like London's ¬£15/day) or higher registration fees. I can help you find local incentives.",
  },
  {
    keywords: ["resale", "value", "depreciation"],
    response: "The market is shifting **fast**. Diesel cars are depreciating rapidly in Europe. EVs currently have strong resale, but battery life is a factor. A car with a poor emission rating will likely be harder to sell in 5 years as regulations tighten.",
  },
  {
    keywords: ["insurance", "cost more", "ev insurance"],
    response: "EV insurance can be **10-20% higher** currently due to repair costs and battery value. However, some insurers offer 'green' discounts for low-emission vehicles. This is evolving rapidly.",
  },

  // ******************************************************************
  // LIFESTYLE & ALTERNATIVES (For the "What can I actually do?" user)
  // ******************************************************************
  {
    keywords: ["bike", "walk", "transit", "bus", "train", "telecommute"],
    response: "The **single most effective** action: drive less. One 10-mile round trip avoided = ~4 kg CO2 saved. Explore: **E-bikes** (huge range, sweat-free), **Car-sharing** for occasional needs, **Transit** for commutes. A 10% reduction in miles is often easier and cheaper than buying a new car.",
  },
  {
    keywords: ["work", "commute", "office", "remote"],
    response: "Talk to your employer! **Telecommuting** 2 days/week can cut your commute emissions by 40%. Ask about **transit passes**, bike storage, showers, and EV charging at work. Frame it as a sustainability initiative.",
  },
  {
    keywords: ["trip", "vacation", "road trip", "fly", "airplane"],
    response: "For a 500-mile trip, a full efficient car can be better than flying (per passenger). For long distances, a **train** is often the lowest-carbon option. If you fly, consider purchasing **high-quality carbon offsets** for the flight's portion.",
  },
  {
    keywords: ["home", "energy", "house", "solar", "panel"],
    response: "If you have an EV, **home solar panels** create a virtuous cycle: your car runs on sunshine, zeroing out both home and transport emissions. It's the ultimate goal. Even without an EV, solar lowers the grid's carbon intensity for everyone's future EVs.",
  },
  {
    keywords: ["buy", "next car", "choose", "recommend", "what car"],
    response: "**My buying guide:** 1) **If you drive < 40 miles/day and can charge at home:** Go pure EV. 2) **If long commutes/no home charging:** Prioritize a top-rated hybrid or PHEV. 3) **If buying used:** A 3-year-old efficient hybrid is often the 'greenest' economic choice. 4) **Size matters:** A small efficient gas car can beat a large, heavy EV. Let's analyze your specific needs.",
  },

  // ******************************************************************
  // PHILOSOPHICAL & FUTURE (For the deep thinker)
  // ******************************************************************
  {
    keywords: ["future", "2030", "2040", "ban", "gasoline", "end"],
    response: "The direction is clear: **Zero-emission mandates**. Norway bans new ICE sales in 2025, UK in 2030, California in 2035. Gas stations will decline. Future cities will prioritize pedestrians and cyclists. Your next car choice prepares you for this inevitable transition. You're not just buying a car; you're choosing a side of history.",
  },
  {
    keywords: ["hope", "optimistic", "despair", "helpless", "individual"],
    response: "Your individual action **matters immensely**. It creates market demand, normalizes change, and influences your social circle (the 'network effect'). Systemic change is built from millions of personal decisions. You are an essential part of the solution. Start where you are.",
  },
  {
    keywords: ["biggest", "worst", "suv", "truck", "hummer"],
    response: "Yes, vehicle size and weight are huge drivers. A large SUV emits **~2-3x more CO2** than a compact car. The move towards ever-larger personal vehicles has offset many engine efficiency gains. Choosing a right-sized vehicle is one of the most powerful climate actions you can take.",
  },
  {
    keywords: ["government", "regulate", "manufacturer", "blame"],
    response: "It's a shared responsibility. **Manufacturers** pushed SUVs and misled on diesel. **Governments** subsidize fossil fuels and set weak standards. **Individuals** choose what to buy and how to drive. The system changes when pressure is applied at all three points. Your awareness fuels that pressure.",
  },
  {
    keywords: ["offset", "carbon offset", "plant tree", "compensate"],
    response: "**Offsetting is a last step, not a first.** First: reduce. For unavoidable emissions, choose **verified, permanent, additional offsets** (like Gold Standard or Verra). Avoid cheap, unverified tree-planting. True offsetting funds projects that wouldn't exist otherwise, like destroying potent industrial gases.",
  },
  {
    keywords: ["water", "resource", "lithium", "battery", "dirty"],
    response: "**Honest answer:** EV batteries have an environmental cost in mining (lithium, cobalt). However, this is **concentrated and regulated** (in specific mines), versus gasoline's **distributed and unmanaged** impact (climate change, spills, fracking). Battery recycling is scaling fast. The lifecycle impact of an EV is **significantly lower** than a gas car.",
  },

  // ******************************************************************
  // SOCIAL & PSYCHOLOGICAL (For the "What will people think?" user)
  // ******************************************************************
  {
    keywords: ["friends", "family", "share", "social", "talk"],
    response: "Lead by example, not by lecture. Share your journey, the fun of an EV's acceleration, the savings, the cleaner air. Offer to let friends test-drive. Frame it as an exciting tech upgrade, not a sacrifice. Social norms are powerful‚Äîyou can help shift them.",
  },
  {
    keywords: ["guilt", "shame", "bad", "already drive"],
    response: "**Please, no guilt.** The system was designed without full awareness. Guilt paralyzes; awareness empowers. You're here, learning. That's the first and most important step. Celebrate every positive change, no matter how small. Progress, not perfection.",
  },

  // ******************************************************************
  // CATCH-ALL & FALLBACK
  // ******************************************************************
  {
    keywords: ["how", "what", "why", "when", "where", "who"],
    response: "That's a great question. To give you the most accurate and helpful answer, could you rephrase it with a bit more detail? For example, 'How do electric cars work in cold weather?' or 'What is the greenest car for a family of five?' I'm here for the details.",
  },
  {
    keywords: ["default"],
    response: "I'm here to help you understand your vehicle's full environmental impact‚Äîfrom tailpipe to atmosphere, from cost to climate. Could you ask your question in a different way? I'm tuned for specifics about emissions, efficiency, technology, health, costs, and the future of transport.",
  }
];